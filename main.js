(()=>{const e=document.querySelector("#addTaskForm"),t=document.querySelector("#addTaskButton"),a=document.querySelector("#addTaskModal"),o=document.querySelector("#editTaskModal"),r=document.querySelector("#addTaskTitle").value,n=document.querySelector("#addTaskDescription").value,d=document.querySelector("#addTaskDueDate").value,s=document.querySelector("#addTaskPriority").value,c=document.querySelector("#addTaskProject").value,i=Math.floor(1e8*Math.random()),l=document.querySelector("#tasksContainer"),u=document.querySelectorAll(".taskCard");let y=document.querySelectorAll(".taskCardDeleteButton"),p=document.querySelectorAll(".taskCardEditButton");const v=document.querySelector("#projectsContainer"),m=document.querySelectorAll(".projectButton");function k(){u.forEach((e=>{e.remove()})),S.forEach((e=>{const t=document.createElement("div");t.classList.add("taskCard"),t.innerHTML=`\n            <div class="taskCardTitle">\n                <h3>${e.title}</h3>\n            </div>\n            <div class="taskCardDescription">\n                <p>${e.description}</p>\n            </div>\n            <div class="taskCardDueDate">\n                <p><b>Due Date:</b> ${e.date}</p>\n            </div>\n            <div class="taskCardPriority">\n                <p><b>Priority:</b> ${e.priority}</p>\n            </div>\n            <div class="taskCardProject">\n                <p><b>Project:</b> ${e.project}</p>\n            </div>\n            <div class="taskCardActions">\n                <button class="taskCardEditButton" id="${e.id}">Edit</button>\n                <button class="taskCardDeleteButton" id="${e.id}" >Delete</button>\n            </div>  \n        `,l&&l.appendChild(t),y.forEach((e=>{e.addEventListener("click",(e=>{const t=e.target.id;S.forEach(((e,a)=>{e.id==t&&(S.splice(a,1),localStorage.setItem("tasks",JSON.stringify(S)),k())}))}))})),p.forEach((e=>{e.addEventListener("click",(e=>{const t=e.target.id,a=S.findIndex((e=>e.id==t)),r=S[a],n=document.querySelector("#editTaskForm"),d=document.querySelector("#editTaskTitle"),s=document.querySelector("#editTaskDescription"),c=document.querySelector("#editTaskDueDate"),i=document.querySelector("#editTaskPriority"),l=document.querySelector("#editTaskProject");d.value=r.title,s.value=r.description,c.value=r.date,i.value=r.priority,l.value=r.project,o.style.display="flex",n.addEventListener("submit",(e=>{e.preventDefault();const r=d.value,n=s.value,u=c.value,y=i.value,p=l.value;S[a]=new h(r,n,u,y,p,t),localStorage.setItem("tasks",JSON.stringify(S)),k(),o.style.display="none"}))}))}))}))}t.addEventListener("click",(()=>{a.style.display="flex"})),e.addEventListener("submit",(function(e){e.preventDefault(),S.push(new h(r,n,d,s,c,i)),localStorage.setItem("tasks",JSON.stringify(S)),a.style.display="none",k()}));let S=[],q=[];document.querySelector("#addProjectButton").addEventListener("click",(function(e){e.preventDefault();const t=document.querySelector("#addProjectTitle").value;q.push(new f(t)),localStorage.setItem("projects",JSON.stringify(q)),console.log(t),m.forEach((e=>{e.remove()})),q.forEach((e=>{const t=document.createElement("button");t.classList.add("projectButton"),t.innerHTML=`\n            <span>${e.project}</span>\n        `,v&&v.appendChild(t)}))})),window.addEventListener("load",(()=>{const e=localStorage.getItem("tasks");e&&(S=JSON.parse(e),k())})),window.addEventListener("click",(e=>{e.target==a?a.style.display="none":e.target==o&&(o.style.display="none")}));class h{constructor(e,t,a,o,r,n){this.title=e,this.description=t,this.date=a,this.priority=o,this.project=r,this.id=n}}class f{constructor(e){this.project=e}}})();